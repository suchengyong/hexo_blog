<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/suchengyonglogo.png"/>
	<link rel="shortcut icon" href="/img/suchengyonglogo.png">
	<meta name="baidu-site-verification" content="3MRZfh0dC4" />
	
			
    <title>
    苏成勇个人博客
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">欢迎来到苏成勇个人博客</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Hexo/">Hexo</a></li><li><a class="category-link" href="/categories/canvas/">canvas</a></li><li><a class="category-link" href="/categories/js/">js</a></li><li><a class="category-link" href="/categories/前端开发/">前端开发</a></li><li><a class="category-link" href="/categories/小程序开发/">小程序开发</a></li><li><a class="category-link" href="/categories/移动端自适应/">移动端自适应</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tags/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/suchengyong" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		                <li><a href="https://suchengyong.netlify.app" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
		            
		            
		            
		                <li><a href="https://simple-ui.netlify.app#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://image.uczzd.cn/6207851735369211778.jpeg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >xshell 连接阿里云服务器centos7.3系统指南与安装mongodb数据库</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h3 id="服务器系统为centos-使用如下命令安装各种包"><a href="#服务器系统为centos-使用如下命令安装各种包" class="headerlink" title="服务器系统为centos 使用如下命令安装各种包"></a>服务器系统为centos 使用如下命令安装各种包</h3><pre><code>1.sudo yum install vim openssl build-essential libssl-dev wget curl git安装vim 和openssl  和build-essential和 libssl-dev和wget和curl和git
</code></pre><ul>
<li>2.输入：nvm查看它信息，</li>
<li>2.1可以通过curl或者wget进行安装nvm:</li>
<li>curl方式:</li>
</ul>
<pre><code>    curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash
</code></pre><p>wget方式:</p>
<pre><code>    wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash
</code></pre><pre><code>2.1.sudo yum install git安装git
</code></pre><ul>
<li><p>2.2.连接服务器成功后输入：yum install -y lrzsz安装上上传和下载命令，rz为上传sz为下载</p>
</li>
<li><p>3.1.安装东西使用yum install -y 包名   即可</p>
</li>
<li><p>3.2 nvm ls-remote列出全部可以安装的版本号</p>
</li>
<li><p>4.nvm use 版本号 切换指定版本，切换效果是全局的</p>
</li>
<li><p>5.nvm current 查看当前使用的版本</p>
</li>
<li><p>6.nvm ls 查看该系统已经安装的版本，这个命令也能看到当前使用的是哪个版本</p>
</li>
<li><p>7.nvm install v9.11.1 安装指定版本</p>
</li>
<li><p>8.nvm use v9.11.1 使用指定版本</p>
</li>
<li><p>9.nvm alias default v9.11.1 指定默认版本</p>
</li>
<li><p>10.node -v 查看node版本号;输出v9.11.1说明安装成功</p>
</li>
</ul>
<pre><code>npm --registry=https://registry.npm.taobao.org install -g npm 将npm 指定到淘宝镜像来加快包下载速度
</code></pre><pre><code>  echo fs.inotify.max_user_watches = 524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p
</code></pre><pre><code>npm --registry=https://registry.npm.taobao.org install -g cnpm 将npm 指定到淘宝镜像cnpm来加快包下载速度以后可以使用cnpm install 来下载波包；
</code></pre><ul>
<li><p>然后使用cnpm install webpack pm2 gulp -g 来安装这些包；</p>
</li>
<li><p>sudo yum install nginx 来安装nginx 然后nginx -v 查看安装版本号</p>
</li>
<li><p>输入 cd /etc/nginx/conf.d 回车，然后vim nginx_8081.conf进行文件编辑内容如下：</p>
</li>
</ul>
<pre><code>upstream suchengyong {
    server 127.0.0.1:8081;
}
server {
    listen 80;
    server_name  112.74.54.23;

    location / {
        proxy_redirect off;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
        proxy_pass http://suchengyong;
    }

}
</code></pre><ul>
<li><p>然后按Esc键在按：wq回车保存成功然后输入nginx -t 测试是否成功，返回success表示成功：</p>
</li>
<li><p>Centos系统 nginx启动：service nginx  start或者重启：service nginx  restart或者/etc/init.d/nginx stop关闭nginx或者/etc/init.d/nginx start启动nginx</p>
</li>
</ul>
<h2 id="mongodb数据库安装"><a href="#mongodb数据库安装" class="headerlink" title="mongodb数据库安装"></a>mongodb数据库安装</h2><h3 id="一、打开官网下载对应版本"><a href="#一、打开官网下载对应版本" class="headerlink" title="一、打开官网下载对应版本"></a>一、打开官网下载对应版本</h3><p><img src="http://www.zixuephp.net/uploads/image/20171208/1512724483131413.png" alt=""></p>
<h3 id="二、解压安装包，复制到对应目录中"><a href="#二、解压安装包，复制到对应目录中" class="headerlink" title="二、解压安装包，复制到对应目录中"></a>二、解压安装包，复制到对应目录中</h3><pre><code>#下载安装包
wget -c https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-3.6.0.tgz
#下载完后进行解压包
tar -xzvf mongodb-linux-x86_64-rhel70-3.6.0.tgz
#创建mogodb目录
mkdir /usr/local/mongodb
#复制安装包到mongodb目录中
mv mongodb-linux-x86_64-rhel70-3.6.0 /usr/local/mongodb
cd /usr/local/mongodb
</code></pre><h3 id="三、守护进程启动mongodb"><a href="#三、守护进程启动mongodb" class="headerlink" title="三、守护进程启动mongodb"></a>三、守护进程启动mongodb</h3><ul>
<li>启动方式和参数：./mongod –dbpath=/usr/local/mongodb/data/db –logpath=/usr/local/mongodb/data/log/logs.log –logappend –fork</li>
</ul>
<pre><code>#/usr/local/mongodb/创建数据库目录和日志目录
mkdir data
#进入data目录
cd data
#创建两个文件夹
mkdir db
mkdir log
cd log
#建立日志文件
touch logs.log

#进入/usr/local/mongodb/bin/目录中启动mongodb

[root@localhost bin]# ./mongod --dbpath=/usr/local/mongodb/data/db --logpath=/usr/local/mongodb/data/log/logs.log --logappend --fork
#运行结果
about to fork child process, waiting until server is ready for connections.
forked process: 1874
child process started successfully, parent exiting
</code></pre><h3 id="四、使用客户端进行mongodb数据库的操作"><a href="#四、使用客户端进行mongodb数据库的操作" class="headerlink" title="四、使用客户端进行mongodb数据库的操作"></a>四、使用客户端进行mongodb数据库的操作</h3><ul>
<li>启动方式（/usr/local/mongodb/bin/目录）：./mongo</li>
</ul>
<pre><code>[root@localhost bin]# ./mongo
MongoDB shell version v3.6.0
connecting to: mongodb://127.0.0.1:27017
MongoDB server version: 3.6.0
Server has startup warnings: 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] ** WARNING: You are running this process as the root user, which is not recommended.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] ** WARNING: This server is bound to localhost.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **          Remote systems will be unable to connect to this server. 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **          Start the server with --bind_ip &lt;address&gt; to specify which IP 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **          addresses it should serve responses from, or with --bind_ip_all to
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **          bind to all interfaces. If this behavior is desired, start the
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **          server with --bind_ip 127.0.0.1 to disable this warning.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is &#39;always&#39;.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **        We suggest setting it to &#39;never&#39;
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] 
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is &#39;always&#39;.
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] **        We suggest setting it to &#39;never&#39;
2017-12-08T16:00:38.798+0800 I CONTROL  [initandlisten] 
&gt;
#查看数据库
&gt; show databases;
admin   0.000GB
config  0.000GB
local   0.000GB
#选择数据库
&gt; use admin
switched to db admin
#查看数据表
&gt; show tables;
system.users
system.version
</code></pre><h3 id="五、mongodb3-6开机启动脚本设置"><a href="#五、mongodb3-6开机启动脚本设置" class="headerlink" title="五、mongodb3.6开机启动脚本设置"></a>五、mongodb3.6开机启动脚本设置</h3><ul>
<li>mongodb3.6开机启动shell脚本，当每次系统重启后mongodb进程并不会随着系统去启动，必须手动去启动它，让费时间，所以需要借助shell脚本让mongodb自动启动。</li>
</ul>
<h3 id="六、mongodb开机启动脚本"><a href="#六、mongodb开机启动脚本" class="headerlink" title="六、mongodb开机启动脚本"></a>六、mongodb开机启动脚本</h3><ul>
<li>1.创建脚本文件：vim /etc/init.d/mongodb</li>
</ul>
<pre><code>#!/bin/bash
# chkconfig: - 85 15
#author:zuoping
name=mongod
path_bin=/usr/local/mongodb/bin/
path=/usr/local/mongodb/
case &quot;$1&quot; in
  start)
    ${path_bin}${name} --dbpath=${path}data/db --logpath=${path}data/log/logs.log --logappend --fork
    if [ $? -eq 0 ];then
      echo &quot;${name}启动成功...&quot;
    else
      echo &quot;${name}启动失败...&quot;
    fi
  ;;
  stop)
    if [ $(ps -ef|grep &quot;mongod&quot; |grep &quot;fork&quot;|awk {&#39;print $2&#39;}) -gt 0 ];then
      kill `ps -ef|grep &quot;mongod&quot; |grep &quot;fork&quot;|awk {&#39;print $2&#39;}`
      if [ $? -eq 0 ];then
        echo &quot;${name}停止成功&quot;
      else
        echo &quot;${name}停止失败&quot;
      fi
    else
      echo &quot;${name}进程已经停止&quot;
    fi
  ;;
  restart)
    if [ $(ps -ef|grep &quot;mongod&quot; |grep &quot;fork&quot;|awk {&#39;print $2&#39;}) -gt 0 ];then
      kill `ps -ef|grep &quot;mongod&quot; |grep &quot;fork&quot;|awk {&#39;print $2&#39;}`
      if [ $? -eq 0 ];then
        echo &quot;${name}停止成功&quot;
      else
        echo &quot;${name}停止失败&quot;
      fi
    else
      echo &quot;${name}进程已经停止&quot;
    fi
    echo &quot;${name}启动中...&quot;
    sleep 3s
    ${path_bin}${name} --dbpath=${path}data/db --logpath=${path}data/log/logs.log --logappend --fork
    if [ $? -eq 0 ];then
      echo &quot;${name}重启成功&quot;
    else
      echo &quot;${name}重启失败&quot;
    fi
   ;;
   *)
    echo &quot;${name}start|stop|restart&quot;
   ;;
esac
</code></pre><ul>
<li>3.加入系统服务和开机自启</li>
</ul>
<pre><code>cd /etc/init.d/
#设置执行权限
chmod a+x mongodb
#加入系统服务
chkconfig --add mongodb
#开机服务自启
chkconfig mongodb on
#重启系统生效
shutdown -r
</code></pre><ul>
<li>4.mongodb开启、停止、重启操作</li>
</ul>
<pre><code>#开启
service mongodb start
#停止
service mongodb stop
#重启
service mongodb restart
</code></pre>
            </div>

            <!-- Post Comments -->
            
    <!-- 使用 changyan -->
<div id="changyan-comment">
    <!--PC和WAP自适应版-->
<div id="SOHUCS" sid="2018/04/25/centos7_3/"  ></div>
<script type="text/javascript">
(function(){
var appid = 'cytsgGBWa';
var conf = 'prod_d517f84e6eeb56312a39e3df9a6c43d8';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

</div>
<style>
    #changyan-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2020总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
